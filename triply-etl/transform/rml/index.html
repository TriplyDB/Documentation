<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <meta name="description" content="The official documentation for the Triply products: TriplyDB, TriplyDB.js, and TriplyETL." />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>RML - Triply Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link href="../../../css/intellij-light.css" rel="stylesheet" />
        <link href="../../../css/triply.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "RML";
        var mkdocs_page_input_path = "triply-etl/transform/rml.md";
        var mkdocs_page_url = null;
      </script>
     
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Triply Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">TriplyDB</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">Getting started</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../triply-db-getting-started/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triply-db-getting-started/uploading-data/">Uploading Data</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triply-db-getting-started/editing-data/">Editing (SKOS) Data</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triply-db-getting-started/publishing-data/">Sharing Data</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triply-db-getting-started/viewing-data/">Viewing Data</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triply-db-getting-started/exporting-data/">Exporting Data</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triply-db-getting-started/saved-queries/">Saved Queries</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triply-db-getting-started/data-stories/">Data Stories</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triply-db-getting-started/admin-settings-pages/">Admin Settings Pages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triply-db-getting-started/reference/">Reference</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../triply-api/">API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">TriplyDB-JS</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/app/">App</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/account/">Account</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/asset/">Asset</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/dataset/">Dataset</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/graph/">Graph</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/organization/">Organization</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/query/">Query</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/service/">Service</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/story/">Story</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/user/">User</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../triplydb-js/faq/">FAQ</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../triply-cli/">Command-line Interface</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../triplydb-changelog/">Changelog</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">TriplyETL</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">Generic</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../generic/getting-started/">Getting Started</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../generic/changelog/">Changelog</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../generic/cli/">Command Line Interface (CLI)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../generic/declarations/">Declarations</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../generic/control-structures/">Control Structures</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../generic/debug/">Debug</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../generic/internal-store/">Internal Store</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../generic/maintenance/">Maintenance</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../generic/record/">Record</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../generic/vocabularies/">Vocabularies</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Sources</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../sources/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../sources/apis/">APIs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../sources/inline-json/">Inline JSON</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../sources/inline-strings/">Inline Strings</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../sources/local-files/">Local Files</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../sources/online-files/">Online Files</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../sources/rml/">RML Sources</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../sources/triplydb-assets/">TriplyDB Assets</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../sources/triplydb-datasets/">TriplyDB Datasets</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../sources/triplydb-queries/">TriplyDB Queries</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Extract</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../extract/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../extract/csv/">CSV</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../extract/json/">JSON</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../extract/oai-pmh/">OAI-PMH</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../extract/postgres/">Postgres</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../extract/rdf/">RDF</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../extract/shapefile/">Shapefile</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../extract/tsv/">TSV</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../extract/xlsx/">XLSX</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../extract/xml/">XML</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Transform</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ratt/">RATT</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">RML</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#configuration-components">Configuration components</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#a-simple-example">A simple example</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../typescript/">TypeScript</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../xslt/">XSLT</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Assert</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../assert/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../assert/json-ld/">JSON-LD</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">RATT</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../assert/ratt/terms/">RATT Terms</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../assert/ratt/statements/">RATT Statements</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../assert/rml/">RML</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../assert/xslt/">XSLT</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Enrich</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../enrich/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">SHACL</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../enrich/shacl/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../enrich/shacl/triple-rules/">Triple Rules</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../enrich/shacl/sparql-rules/">SPARQL Rules</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">SPARQL</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../enrich/sparql/construct/">SPARQL Construct</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../enrich/sparql/update/">SPARQL Update</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Validate</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../validate/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../validate/graph-comparison/">Graph Comparison</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../validate/shacl/">SHACL</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../publish/">Publish</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Yasgui</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../yasgui/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../yasgui-api/">For Developers</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Triply Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">TriplyETL</li>
          <li class="breadcrumb-item">Transform</li>
      <li class="breadcrumb-item active">RML</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="toc"><span class="toctitle">On this page:</span><ul>
<li><a href="#rml-transformations">RML Transformations</a><ul>
<li><a href="#configuration-components">Configuration components</a></li>
<li><a href="#a-simple-example">A simple example</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="rml-transformations">RML Transformations<a class="headerlink" href="#rml-transformations" title="Permanent link">&para;</a></h1>
<p>The RDF Mapping Language (RML) is an ETL configuration language for linked data. RML mappings are applied to the TriplyETL Record.</p>
<h2 id="configuration-components">Configuration components<a class="headerlink" href="#configuration-components" title="Permanent link">&para;</a></h2>
<p>RML mappings contain the following configuration components:</p>
<ul>
<li>
<p><strong>Logical Source</strong>: Defines the source of the data to be transformed. It includes information about the data format (csv, xml, json, etc.), location, and access methods. Logical sources can represent various types of data sources, such as files, databases, or web services.</p>
</li>
<li>
<p><strong>Triples Map</strong>: The mapping rules that are used to convert data from a Logical Source to linked data. It defines how data should be transformed and specifies the subject, predicate and object terms of the generated statements.</p>
<ul>
<li>
<p><strong>Subject Map</strong>: The part of the Triples Map that defines how the subjects of the generated linked data statements must be constructed. It specifies the subject's term type, which can be blank node, IRI or literal. It often includes the class of which the subject term is an instance.</p>
</li>
<li>
<p><strong>Predicate Object Map</strong>: The part of the Triples Map that defines how the predicate and objects are mapped.</p>
</li>
</ul>
</li>
</ul>
<h2 id="a-simple-example">A simple example<a class="headerlink" href="#a-simple-example" title="Permanent link">&para;</a></h2>
<p>The following full TriplyETL script applies the RML mappings specified in <code>map.trig</code> to the in-line specified source data record:</p>
<pre><code class="language-ts">import { logQuads } from '@triplyetl/etl/debug'
import { Etl, fromJson, Source } from '@triplyetl/etl/generic'
import { map } from '@triplyetl/etl/rml'

export default async function (): Promise&lt;Etl&gt; {
  const etl = new Etl()
  etl.use(
    fromJson([{ name: 'John' }]),
    map(Source.file('map.trig')),
    logQuads(),
  )
  return etl
}
</code></pre>
<p>The contents of file <code>map.trig</code> specify how the data will be mapped:</p>
<pre><code class="language-turtle">prefix ql: &lt;http://semweb.mmlab.be/ns/ql#&gt;
prefix rml: &lt;http://semweb.mmlab.be/ns/rml#&gt;
prefix rr: &lt;http://www.w3.org/ns/r2rml#&gt;
prefix sdo: &lt;https://schema.org/&gt;

[] rml:logicalSource
     [ rml:source '$Record.json';
       rml:referenceFormulation ql:JSONPath;
       rml:iterator '$' ];
   rr:subjectMap
     [ rr:termType rr:BlankNode;
       rr:class sdo:Person ];
   rr:predicateObjectMap
     [ rr:predicate sdo:firstName;
       rr:objectMap [ rml:reference 'name' ] ].
</code></pre>
<p>The Logical Source component specifies that the TriplyETL Record should be used:</p>
<pre><code class="language-turtle">[] rml:logicalSource
     [ rml:source '$Record.json';
       rml:referenceFormulation ql:JSONPath;
       rml:iterator '$' ];
</code></pre>
<p>The Subject Map specifies that the subject term is a blank node that is an instance of class <code>sdo:Person</code>:</p>
<pre><code class="language-turtle">[] rr:subjectMap
     [ rr:termType rr:BlankNode;
       rr:class sdo:Person ];
</code></pre>
<p>The Predicate Object Map specifies that the value of key 'name' should be used together with the property <code>sdo:firstName</code>:</p>
<pre><code class="language-turtle">[] rr:predicateObjectMap
     [ rr:predicate sdo:firstName;
       rr:objectMap [ rml:reference 'name' ] ].
</code></pre>
<p>Running the TriplyETL script results in the following linked data:</p>
<pre><code class="language-turtle">&lt;https://triplydb.com/.well-known/genid/1703545835347b1_b0&gt;
  a sdo:Person;
  sdo:firstName 'John'.
</code></pre>
<!--
## Using a file source

### Input Data (JSON)


<pre><code class="language-json">{
  &quot;name&quot;: &quot;Hello World&quot;,
  &quot;description&quot;: &quot;It worked!&quot;
}
</code></pre>


### RML Mapping File (mapping.ttl)


<pre><code class="language-turtle">base &lt;http://sti2.at/&gt;
prefix rr: &lt;http://www.w3.org/ns/r2rml#&gt;
prefix rml: &lt;http://semweb.mmlab.be/ns/rml#&gt;
prefix myprefix: &lt;http://myprefix.org/&gt;
prefix ql: &lt;http://semweb.mmlab.be/ns/ql#&gt;

&lt;#LOGICALSOURCE&gt;
  rml:source &quot;./static/input.json&quot;;
  rml:referenceFormulation ql:JSONPath;
  rml:iterator &quot;$&quot;.

&lt;#Mapping&gt;
  rml:logicalSource &lt;#LOGICALSOURCE&gt;;
  rr:subjectMap
    [ rr:termType rr:BlankNode;
      rr:class myprefix:TestMapping ];
  rr:predicateObjectMap
    [ rr:predicate myprefix:hasName;
      rr:objectMap [ rml:reference &quot;name&quot; ] ];
  rr:predicateObjectMap
    [ rr:predicate myprefix:says;
      rr:objectMap [ rml:reference &quot;description&quot; ] ].
</code></pre>


### Expected RDF Output


<pre><code class="language-turtle">&lt;http://sti2.at/resource1&gt;
  a &lt;http://myprefix.org/TestMapping&gt;;
  &lt;http://myprefix.org/hasName&gt; 'Hello World';
  &lt;http://myprefix.org/says&gt; 'It worked!'.
</code></pre>


## Usage in TriplyETL

You can use RML in TriplyETL with the following code:


<pre><code class="language-ts">import { map } from

const etl = new Etl();
etl.use(
  map(Source.file(&quot;static/mapping.ttl&quot;)),
)
</code></pre>


Where mapping.ttl file should be replaced with your specific file with RML mapping rules.

Keep in mind that if you wish to view the ETL's output, you can achieve this by including functions like logQuads() and toRdf(), as demonstrated in the following code:


<pre><code class="language-ts">import { logQuads } from '@triplyetl/etl/debug'
import { Destination, Etl, Source, toRdf } from '@triplyetl/etl/generic'
import { map } from '@triplyetl/etl/rml'

export default async function (): Promise&lt;Etl&gt; {
  // Create an extract-transform-load (ETL) process.
  const etl = new Etl()
  etl.use(
    map(Source.file(&quot;static/mapping.ttl&quot;)),
    logQuads(),
    toRdf(Destination.file('my-file.ttl'))
  )
  return etl
}
</code></pre>

-->
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../ratt/" class="btn btn-neutral float-left" title="RATT"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../typescript/" class="btn btn-neutral float-right" title="TypeScript">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../ratt/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../typescript/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
      <script src="../../../js/triply.js" defer></script>
      <script src="../../../js/highlight.min.js" defer></script>
      <script src="../../../search/main.js" defer></script>

</body>
</html>
